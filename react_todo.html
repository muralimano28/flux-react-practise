<html>
    <head>
        <title>Todo App</title>
        <script type="text/javascript" src="./react.js"></script>
        <script type="text/javascript" src="./JSXTransformer.js"></script>
    </head>
    <script type="text/jsx">
    var TodoList = React.createClass({
        render:function(){
            var _mapfunction = function(itemtext){
                return <li>{itemtext}</li>
            }
            return(
                <div>
                    <ul>{this.props.items.map(_mapfunction)}</ul>
                </div>
            );
        }
    });

    var TodoApp = React.createClass({
        getInitialState:function(){
            return{
                items:[],
                nextItem:"",
                txt:""
            }
        },
        updateEverything:function(e){
            e.preventDefault();
            var _nextitem = this.state.items.concat([this.state.txt]);
            this.setState({
                items:_nextitem,
                txt:""
            });
        },
        updateText:function(e){
            this.setState({
                txt:e.target.value
            });
        },

        render:function(){
            return(
                <div>
                    <TodoList items={this.state.items} />
                    <input type="text" onChange={this.updateText} value={this.state.txt} />
                    <button onClick={this.updateEverything} >{'Add #' + (this.state.items.length+1)}</button>
                </div>
            )
        }
    });
    React.render(<TodoApp />,document.body);
</script>

    <body>
    </body>
</html>